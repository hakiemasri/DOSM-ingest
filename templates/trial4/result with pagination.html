{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
  <h1>Query Result</h1>

  {% if result %}
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Item</th>
          <th scope="col">Price</th>
          <th scope="col">Unit</th>
          <th scope="col">Item Group</th>
          <th scope="col">Item Category</th>
          <th scope="col">Premise</th>
          <th scope="col">Premise Type</th>
          <th scope="col">State</th>
          <th scope="col">District</th>
          <th scope="col">Address</th>
          <th scope="col">Date</th>
        </tr>
      </thead>
      <tbody>
        {% for row in result %}
          <tr>
            <td>{{ row[0] }}</td>
            <td>{{ row[1] }}</td>
            <td>{{ row[2] }}</td>
            <td>{{ row[3] }}</td>
            <td>{{ row[4] }}</td>
            <td>{{ row[5] }}</td>
            <td>{{ row[6] }}</td>
            <td>{{ row[7] }}</td>
            <td>{{ row[8] }}</td>
            <td>{{ row[9] }}</td>
            <td>{{ row[10] }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    {% if pages and pages > 1 %}
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          {% if current_page > 1 %}
            <li class="page-item"><a class="page-link" href="?page={{ current_page - 1 }}{% if item_category %}&item_category={{ item_category }}{% endif %}{% if months %}&months={{ months }}{% endif %}{% if years %}&years={{ years }}{% endif %}{% if days %}&days={{ days }}{% endif %}">Previous</a></li>
          {% endif %}
          {% for page in pages %}
            {% if page == current_page %}
              <li class="page-item active" aria-current="page"><span class="page-link">{{ page }} <span class="sr-only">(current)</span></span></li>
            {% else %}
              <li class="page-item"><a class="page-link" href="?page={{ page }}{% if item_category %}&item_category={{ item_category }}{% endif %}{% if months %}&months={{ months }}{% endif %}{% if years %}&years={{ years }}{% endif %}{% if days %}&days={{ days }}{% endif %}">{{ page }}</a></li>
            {% endif %}
          {% endfor %}
          {% if current_page < pages %}
            <li class="page-item"><a class="page-link" href="?page={{ current_page + 1 }}{% if item_category %}&item_category={{ item_category }}{% endif %}{% if months %}&months={{ months }}{% endif %}{% if years %}&years={{ years }}{% endif %}{% if days %}&days={{ days }}{% endif %}">Next</a></li>
          {% endif %}
        </ul>
      </nav>
    {% endif %}

  {% else %}
    <p>No result found.</p>
  {% endif %}
</div>
{% endblock %}
